(function(a){a.widget("ui.dropdownForm",{version:"0.1.1",options:{namespace:null,form:null,groups:null},_create:function(){var c=this;var e=c.options;var b=c.element.find("form:first");var f=c.element.find(":submit");var d=a("<div class='control ui-corner-all ui-state-default'><span>Display Options</span><div class='ui-icon ui-icon-triangle-1-s'>&nbsp;</div></div>");d.prependTo(c.element);d.fadeTo(100,0.5);c.element.find(".ui-optionGroups").optionGroups();b.hide();c._bindEvents()},_bindEvents:function(){var k=this;var i=k.element.find(".control:first");var l=k.element.find("form:first");var e=k.element.find(":submit");var d=function(m){if(l.is(":visible")&&(!a.contains(l[0],m.target))){i.trigger("click");k.element.trigger("mouseleave")}};var h=function(m){i.fadeTo(100,1)};var c=function(m){if(l.is(":visible")){return}i.fadeTo(100,0.5)};var f=function(m){m.preventDefault();m.stopPropagation();l.toggle();i.toggleClass("ui-state-active");return false};var g=function(m){m.preventDefault()};var b=function(m){e.removeClass("ui-state-disabled").removeAttr("disabled").addClass("ui-state-default")};var j=function(n){var m=l.serializeArray();a(m).each(function(){a.log("Add Cookie: name[%s], value[%s]",this.name,this.value);a.cookie(this.name,this.value)});k.disable()};a("body").bind("click.uidropdownform",d);i.bind("mouseenter.uidroppdownform",h).bind("mouseleave.uidroppdownform",c).bind("click.uidropdownform",f);l.bind("change.uidropdownform",b).bind("submit.uidropdownform",j)},getGroup:function(){return this.element.find(".displayStyle").optionGroups("getGroup")},setGroup:function(b){return this.element.find(".displayStyle").optionGroups("setGroup",b)},getGroupInfo:function(){return this.element.find(".displayStyle").optionGroups("getGroupInfo")},open:function(){if(this.element.find("form:first").is(":visible")){return}this.element.find(".control:first").click()},close:function(){if(!this.element.find("form:first").is(":visible")){return}this.element.find(".control:first").click()},enable:function(b){var c=this.element.find("form:first");var d=this.element.find(":submit");c.find("input,select").removeAttr("disabled");if(b!==true){d.removeClass("ui-state-default ui-state-highlight").addClass("ui-state-disabled").attr("disabled",true)}else{d.removeClass("ui-state-disabled").removeAttr("disabled").addClass("ui-state-default")}},disable:function(){var b=this.element.find("form:first");var c=this.element.find(":submit");b.find("input,select").attr("disabled",true);c.removeClass("ui-state-default ui-state-highlight").addClass("ui-state-disabled").attr("disabled",true)},destroy:function(){var c=this;var d=c.element.find(".control:first");var b=c.element.find("form:first");var e=c.element.find(":submit");a("body").unbind(".uidropdownform");d.unbind(".uidropdownform");d.find("a:first, .ui-icon:first").unbind(".uidropdownform");b.unbind(".uidropdownform");d.remove();c.element.find(".displayStyle").optionGroups("destroy")}})}(jQuery));