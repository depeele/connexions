(function(a){a.widget("ui.input",{version:"0.1.1",options:{priority:"normal",emptyText:null,validationEl:null,validation:null},_create:function(){var c=this;var d=this.options;d.enabled=c.element.attr("disabled")?false:true;if(d.validationEl){if(d.validationEl.jquery===undefined){d.validationEl=a(d.validationEl)}}else{d.validationEl=c.element.parent().find(".ui-field-status:first")}if((!d.validation)&&(c.element.hasClass("required"))){d.validation="!empty"}c.element.addClass("ui-input ui-corner-all ");c.keyTimer=null;if(d.priority==="primary"){c.element.addClass("ui-priority-primary")}else{if(d.priority==="secondary"){c.element.addClass("ui-priority-secondary")}}c.element.addClass("ui-state-default");if(!d.enabled){c.element.addClass("ui-state-disabled")}if(d.emptyText===null){var e=c.element.attr("emptyText");if((e!==undefined)&&(e.length>0)){d.emptyText=e}}if((d.emptyText===null)&&(!c.element.is(":password"))){if(d.hideLabel!==false){var f=c.element.attr("id");var b=null;if((f===undefined)||(f.length<1)){f=c.element.attr("name")}if((f!==undefined)&&(f.length>0)){b=c.element.parent().find("label[for="+f+"]")}if((b!==null)&&(b.length>0)){d.emptyText=b.text();d.hideLabel=true}}}c.setEmptyText(d.emptyText,true);c._bindEvents()},_bindEvents:function(){var d=this;var c=function(h){if(d.options.enabled===true){d.element.addClass("ui-state-hover")}};var g=function(i){var h=a(this);h.removeClass("ui-state-hover")};var b=function(h){if(d.options.enabled!==true){return}if(d.keyTimer!==null){clearTimeout(d.keyTimer)}if(h.keyCode===9){return}d.valid(undefined);d.keyTimer=setTimeout(function(){d.validate()},1000)};var f=function(h){if(d.options.enabled===true){if((d.options.emptyText!==null)&&(d.val().length<1)){d.element.val("")}d.element.removeClass("ui-state-empty").addClass("ui-state-focus ui-state-active")}};var e=function(h){d.element.removeClass("ui-state-focus ui-state-active");if(!d.element.hasClass("ui-state-valid")){d.validate()}if(d.val().length<1){d.element.addClass("ui-state-empty");if(d.options.emptyText!==null){d.element.val(d.options.emptyText)}}};d.element.bind("mouseenter.uiinput",c).bind("mouseleave.uiinput",g).bind("keydown.uiinput",b).bind("focus.uiinput",f).bind("blur.uiinput",e);if(this.val().length>0){d.validate()}},isEnabled:function(){return this.options.enabled},isValid:function(){return this.options.valid},enable:function(){if(!this.options.enabled){this.options.enabled=true;this.element.removeClass("ui-state-disabled").removeAttr("disabled");this.element.trigger("enabled.uiinput")}},disable:function(){if(this.options.enabled){this.options.enabled=false;this.element.attr("disabled",true).addClass("ui-state-disabled");this.element.trigger("disabled.uiinput")}},valid:function(b){if(b===this.options.valid){return}this.element.removeClass("ui-state-error ui-state-valid");this.options.validationEl.empty().removeClass("ui-state-invalid ui-state-valid");if(b===true){this.element.addClass("ui-state-valid");this.options.validationEl.addClass("ui-state-valid")}else{if(b!==undefined){this.element.addClass("ui-state-error");this.options.validationEl.addClass("ui-state-invalid");if(typeof b==="string"){this.options.validationEl.html(b)}}}this.options.valid=b;this.element.trigger("validationChanged.uiinput")},getEmptyText:function(){return this.options.emptyText},setEmptyText:function(d,c){if(this.element.is(":password")){this.options.hideLabel=false;this.options.emptyText=null;return}if((this.options.emptyText!==null)&&(this.val()===this.options.emptyText)){this.element.val("")}this.options.emptyText=d;if(this.options.emptyText!==null){if(this.options.hideLabel!==false){this.options.hideLabel=true;var e=this.element.attr("id");if((e===undefined)||(e.length<1)){e=this.element.attr("name")}if((e!==undefined)&&(e.length>0)){var b=this.element.parent().find("label[for="+e+"]");b.hide()}}if(((c===true)||(!this.element.is(":focus")))&&(this.val().length<1)){this.element.val(this.options.emptyText)}}},val:function(d){var b=this;var c=null;if(d===undefined){c=b.element.val().trim();if((b.options.emptyText!==null)&&(c===b.options.emptyText)){c=""}}else{c=b.element.val(d);b.validate()}return c},validate:function(){var d=[];var c;if(a.isFunction(this.options.validation)){var b=this.options.validation.apply(this.element,[this.val()]);if(typeof b==="string"){c=false;d.push(b)}else{c=b}}else{if(this.options.validation==="!empty"){c=((this.val().length>0)?true:false);d.push("Cannot be empty")}}this.valid(((c===false)&&(d.length>0)?d.join("<br />"):c))},destroy:function(){this.options.validationEl.removeClass("ui-state-valid ui-state-invalid ");this.element.removeClass("ui-state-default ui-state-disabled ui-state-hover ui-state-valid ui-state-error ui-state-focus ui-state-active ui-priority-primary ui-priority-secondary ").unbind(".uiinput")}})}(jQuery));