(function(a){a.widget("ui.dropdownForm",{version:"0.1.1",widgetEventPrefix:"",options:{namespace:null,form:null,groups:null},_create:function(){var c=this;var e=c.options;var b=c.element.find("form:first");var f=c.element.find(":submit");var d=a("<div class='control ui-corner-all ui-state-default'><span>Display Options</span><div class='ui-icon ui-icon-triangle-1-s'>&nbsp;</div></div>");d.prependTo(c.element);d.fadeTo(100,0.5);c.element.find(".ui-optionGroups").optionGroups();b.hide();c._bindEvents()},_bindEvents:function(){var l=this;var j=l.element.find(".control:first");var m=l.element.find("form:first");var e=l.element.find(":submit");var d=function(n){if(m.is(":visible")&&(!a.contains(m[0],n.target))){j.trigger("click");l._trigger("mouseleave",n)}};var i=function(n){j.fadeTo(100,1)};var c=function(n){if(m.is(":visible")){return}j.fadeTo(100,0.5)};var f=function(n){n.preventDefault();n.stopPropagation();m.toggle();j.toggleClass("ui-state-active");return false};var h=function(n){n.preventDefault()};var b=function(n){e.removeClass("ui-state-disabled").removeAttr("disabled").addClass("ui-state-default")};var k=function(o){var n=m.serializeArray();a(n).each(function(){a.cookie(this.name,this.value)});if(!l._trigger("apply",o)){o.stopImmediatePropagation();o.preventDefault();o.stopPropagation();return false}};var g=function(n){n.preventDefault();m.trigger("submit")};a("body").bind("click.uidropdownform",d);j.bind("mouseenter.uidroppdownform",i).bind("mouseleave.uidroppdownform",c).bind("click.uidropdownform",f);m.bind("change.uidropdownform",b).bind("submit.uidropdownform",k);e.bind("click.uidropdownform",g)},getGroup:function(){return this.element.find(".displayStyle").optionGroups("getGroup")},setGroup:function(b){return this.element.find(".displayStyle").optionGroups("setGroup",b)},getGroupInfo:function(){return this.element.find(".displayStyle").optionGroups("getGroupInfo")},setApplyCb:function(b){this.options.apply=b},open:function(){if(this.element.find("form:first").is(":visible")){return}this.element.find(".control:first").click()},close:function(){if(!this.element.find("form:first").is(":visible")){return}this.element.find(".control:first").click()},enable:function(b){var c=this.element.find("form:first");var d=this.element.find(":submit");c.find("input,select").removeAttr("disabled");if(b!==true){d.removeClass("ui-state-default ui-state-highlight").addClass("ui-state-disabled").attr("disabled",true)}else{d.removeClass("ui-state-disabled").removeAttr("disabled").addClass("ui-state-default")}},disable:function(){var b=this.element.find("form:first");var c=this.element.find(":submit");b.find("input,select").attr("disabled",true);c.removeClass("ui-state-default ui-state-highlight").addClass("ui-state-disabled").attr("disabled",true)},destroy:function(){var c=this;var d=c.element.find(".control:first");var b=c.element.find("form:first");var e=c.element.find(":submit");a("body").unbind(".uidropdownform");d.unbind(".uidropdownform");d.find("a:first, .ui-icon:first").unbind(".uidropdownform");b.unbind(".uidropdownform");d.remove();c.element.find(".displayStyle").optionGroups("destroy")}})}(jQuery));